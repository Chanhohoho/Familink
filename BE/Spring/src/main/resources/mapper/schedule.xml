<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.famillink.model.mapper.ScheduleMapper">

    <!-- read -->
    <!-- 스케줄 uid로 스케줄 한 개 조회 -->
    <select id="selectSchedule" parameterType="Long" resultType="Schedule">
        SELECT `uid`,
               `member_uid` AS memberUid,
               `context`
        FROM schedule
        WHERE `uid` = ${uid}
    </select>

    <!-- 전체 스케줄 조회 -->
    <select id="selectScheduleList" parameterType="Schedule" resultType="Schedule">
        SELECT `uid`,
               `member_uid` AS memberUid,
               `context`,
               `date`
        FROM schedule
        WHERE `account_uid` = #{accountUid} AND `date` = #{date}
    </select>

    <!-- 특정 멤버가 작성한 스케줄 조회 -->
    <select id="selectScheduleListByMemberUid" parameterType="Long" resultType="Schedule">
        SELECT `uid`,
               `member_uid` AS memberUid,
               `context`,
               `date`
        FROM schedule
        WHERE `member_uid` = #{member_uid} AND `date` = #{date}
    </select>

    <!-- create -->
    <insert id="insertSchedule" parameterType="Schedule">
        INSERT INTO schedule(`account_uid`, `member_uid`, `context`, `date`)
        VALUES (#{account_uid}, #{member_uid}, #{context}, #{date})
        <selectKey resultType="long" keyProperty="uid" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <!-- update -->

    <!-- delete -->


</mapper>